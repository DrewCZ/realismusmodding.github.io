language: ruby
rvm:
  - 2.2

branches:
  except:
  - test
  - master


env:
  global:
    secure: zmpHwPaDkLfVe4+qwuO2eYZQjeov4TKWEpEG499/A6tLAVFqaPBy+0rKvJUAd7ONAKvB1vrHTIxkYDbZ748Z9H43Kl0/7PySxCK2VivIzl82nbjEqWM+n7wh+aS2L9cLUF7nXsmYAou6tEcpTC09rWfT2FHpjDPnnl28h3L1uz9W8rhCCULo+Q7k3hgKuCgfRTRyAnx8EonsDkeG/i74I0FT6eyXYDYwduhooykOn/36Wv3qOdRzTEcWIOMNxkXByYuWOtIyNnb6vFCY8jGmzL2+L0ZeCqnc4eK5F8+C+yMZyNrLPwe5LQcIyUO3LViYkGM4Vq0Sh9Z3eSuhuyPzO2NAOdKnTwWLUgWs0ZQh2tirJcxW+cJlCxysnByV57mpYmDgp+AtRqmRxDa9IoWi6c+p97fUh2gTc8Z+dV/GCbgj0k/r3vDrSkwDdKLpb2rB4XCZqJajKdBGMWStXTe4rPEFpkX0Nlx2aP91adYlFEBjZP2zuRMNRBV2GCiGrOJS41RBTmgOy+B5s19oTBouclECmaFRHvrO+gSiGw6hhYrw1jPfUawZQ0JsmvRYicX5im/6Yb92NGZAvvp21MUx/+gzYmN0MTl4XcRDjAPJNAtOyAAQESngjTgCfFllPmQ0yxcB0NMsMnHeOkmr79Y7j6dTOQ9rbgD21snlIi29l+Y=

# before_install:
install:
  - bundle install

# before_script:
script:
  # bundle exec rake
  - bundle exec jekyll build

after_script:
  - ls -R .

deploy:
  provider: pages
  github_token: $GITHUB_TOKEN
  fqdn: www.realismusmodding.com

  # Do not clean up, or site is gone
  skip_cleanup: true

  # Site is at _site
  local_dir: _site

  # Push built from source to master
  target_branch: test # master
  on:
    branch: source

# Only do slack notifications
notifications:
  slack:
    secure: pI7bQ0bAtstZvRif3TcDm9XRSKCE/MOMcprus8Q4LUAB+CJFWxE1x47VDCWSm5ysfH2vmFjDWvFxfQUYvGQLcbOsNk0A1a3VKjJaz4jRVTtAW3/9KwnW5JHX6mFZB/KzRb1OYdXys8Tj5I3lb20PIfIg56/Z1pFnzSUuqpOKT9bVCVUd9a2fQ0JDhBP+5w35SbfG3UvZRjNlBS9LVf3iJllvdZTaIl9BqM5RDeFrSpALW9qjkukecuyA+iM3HAER6wE1jBv8+pv3y/wEAZLYD/QaQ9n9do14pdZVAveEYA+KpWFMOMO7RtnNwKizJG8Cy40rq7LgWYz1yKW/EOugmLO2TORdoaZ8WfDOWa4jW1EtlI+F2yAoO04lOdWF6/L9d4URWkimaPlMqgtqlSWeea9j/sCgH6ah1bOHsw3HZ0Ls83Pq0hL5juJCEqvX/Rzd+uPSF0UzNBRG9VXO1AYXjXslQN5xU8vKqyiwwFLjQKYxPX3OOlm62cAq4DUGIH2IKNWO/SXnOX3pE67oOyG+aUozOugXT6hvnYVvYXEeqFqsGriCcEcH8DHrhBp7AcneGQktfx/s0fSOnZqIE1nIxfyTle1WOOLOkjIhiRgOqOkFnpdYq85lbtQgUX/6okwhm7ZiKSmk8ouPvkqSUj+Rlerev5aRNqB5xCzTH3ag3NI=
    on_success: change
    on_failure: always
  email: false
